import{A as H}from"./AbleProLayout-d06b40f6.js";import{Q as J,T as K,Z as W,i as j}from"./@inertiajs-21fbd498.js";import{r as U,k as X,b as Y,y as u,o as i,e as y,q as l,u as o,v as a,f as e,t as d,z as g,j as x,g as k,O as ee,F as M,B as E}from"./@vue-7516ecd3.js";import"./ApplicationLogo-4fddd580.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./axios-4d564c32.js";import"./deepmerge-73d550e5.js";import"./@ckeditor-7eab192b.js";import"./vue-6cd98a9a.js";import"./qs-e1b0650f.js";import"./side-channel-afb193f6.js";import"./get-intrinsic-88feedc6.js";import"./es-errors-82fd953f.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-1353c55e.js";import"./function-bind-61637ca6.js";import"./hasown-bc561cf0.js";import"./call-bind-9ec8ebd8.js";import"./set-function-length-ecd19468.js";import"./define-data-property-d38573ea.js";import"./es-define-property-cfa03815.js";import"./gopd-4c4454f6.js";import"./has-property-descriptors-68e2873e.js";import"./object-inspect-4cdc4b9e.js";import"./nprogress-97b5e360.js";import"./lodash.clonedeep-9c7c19eb.js";import"./lodash.isequal-9e40f450.js";const te={class:"flex justify-between"},se={class:"align-start"},le={class:"align-end ml-3"},oe={class:"col-sm-12"},ae={class:"card shadow"},ne={class:"card-body py-0"},re={class:"nav nav-tabs profile-tabs",id:"myTab",role:"tablist"},ie=e("li",{class:"nav-item",role:"presentation"},[e("a",{class:"nav-link active",id:"profile-tab-1","data-bs-toggle":"tab",href:"#class",role:"tab","aria-selected":"true"},[e("i",{class:"ti ti-user me-2"}),x("My Class ")])],-1),de=e("li",{class:"nav-item",role:"presentation"},[e("a",{class:"nav-link",id:"profile-tab-2","data-bs-toggle":"tab",href:"#members",role:"tab","aria-selected":"false",tabindex:"-1"},[e("i",{class:"ti ti-file-text me-2"}),x("Members ")])],-1),ce={key:0,class:"nav-item",role:"presentation"},me=e("a",{class:"nav-link",id:"profile-tab-2","data-bs-toggle":"tab",href:"#gradebook",role:"tab","aria-selected":"false",tabindex:"-1"},[e("i",{class:"ti ti-file-text me-2"}),x("Gradebook ")],-1),ue=[me],pe={class:"tab-content"},_e={class:"tab-pane active show",id:"class",role:"tabpanel","aria-labelledby":"class"},be={class:"row"},he={class:"col-md-12"},ve={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},fe=e("header",null,[e("h2",{class:"text-lg font-medium text-gray-900"}," Assessment List ")],-1),ye={class:"row"},ge={key:0,class:"col-12 mb-3"},ke={class:"col-md-12"},xe={class:"tab-pane",id:"members",role:"tabpanel","aria-labelledby":"members"},we={class:"row"},Ve={class:"col-md-12"},Ce={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},je=e("header",null,[e("h2",{class:"text-lg font-medium text-gray-900"}," Member List ")],-1),Ae={class:"row"},Ue={class:"col-md-12"},Be=e("td",null,null,-1),Me={key:0,class:"tab-pane",id:"gradebook",role:"tabpanel","aria-labelledby":"gradebook"},Ne={class:"row"},Oe={class:"col-md-12"},Se={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},Ee=e("header",null,[e("h2",{class:"text-lg font-medium text-gray-900"}," GradeBook ")],-1),Fe={class:"row"},Le={class:"col-12 mb-3"},Te={class:"col-md-12"},Ge=e("thead",null,[e("tr",null,[e("td",{class:"font-bold"},"Assessment"),e("td",{class:"font-bold"},"Grade")])],-1),qe={class:"font-bold text-right"},pt={__name:"Show",props:{classroom:Object,assessment:Object,members:Object,gradebook:Object},setup(F){const v=F,_=J().props.auth.user;let N=U([]);const b=U(null);let L=[{title:"Name",align:"start",key:"name"},{title:"Type",key:"type"},{title:"Status",key:"status"},{title:"Action",key:"action"}],T=[{title:"Name",align:"start",key:"name"},{title:"Email",key:"email"},{title:"Contact",key:"contact"},{title:"Action",key:"action"}],V=U([]),A=U([]);X(()=>{N.value=v.assessment,V.value=v.members});let G=n=>{let s=new Set;return n.forEach(c=>Object.keys(c).forEach(m=>s.add(m))),s=Array.from(s),[...s,...n.map(c=>s.map(m=>c[m]??"").join(","))].join(`
`)},q=(n,s,r)=>{let c=new Blob([n],{type:r});const m=URL.createObjectURL(c),h=document.createElement("a");h.href=m,h.setAttribute("download",s),h.click()};const D=async()=>{console.log(V.value);let n=V.value.map(r=>{let c={};return r.user.assessment_result.forEach((m,h)=>{c[`${m.assessment.name} - ${h+1}`]=m.grade}),{name:r.user.name,...c}});console.log(n);const s=G(n);q(s,"./grade_report.csv","text/csv;charset=utf-8;")},B=K({}),R=n=>{B.delete(route("assessment.destroy",n.id),{preserveScroll:!1,preserveState:!1,onFinish:()=>B.reset()})};Y(()=>{});const $=()=>{B.delete(route("classroom.destroy",{id:v.classroom.id}))};return(n,s)=>{const r=u("v-btn"),c=u("v-spacer"),m=u("v-text-field"),h=u("v-card-title"),O=u("v-data-table"),z=u("v-expansion-panel-title"),I=u("v-table"),P=u("v-expansion-panel-text"),Q=u("v-expansion-panel"),Z=u("v-expansion-panels");return i(),y(M,null,[l(o(W),{title:v.classroom.name},null,8,["title"]),l(H,null,{pageTitle:a(()=>[e("div",te,[e("div",se,d(v.classroom.name.toUpperCase())+" - "+d(v.classroom.class_code),1),e("div",le,[o(_).type==="instructor"?(i(),g(r,{key:0,onClick:$,class:"mr-2 text-white",density:"comfortable","prepend-icon":"mdi-delete",color:"danger"},{default:a(()=>[x("Delete Class")]),_:1})):k("",!0)])])]),default:a(()=>[e("div",oe,[e("div",ae,[e("div",ne,[e("ul",re,[ie,de,o(_).type==="instructor"?(i(),y("li",ce,ue)):k("",!0)])])]),e("div",pe,[e("div",_e,[e("div",be,[e("div",he,[e("div",ve,[fe,e("div",ye,[o(_).type==="instructor"?(i(),y("div",ge,[l(o(j),{href:n.route("assessment.create",{classroom_id:v.classroom.id})},{default:a(()=>[l(r,{color:"primary",class:"float-right","prepend-icon":"mdi-plus"},{default:a(()=>[x("Create")]),_:1})]),_:1},8,["href"])])):k("",!0),e("div",ke,[l(h,{class:"d-flex align-center pe-2"},{default:a(()=>[l(c),l(m,{modelValue:b.value,"onUpdate:modelValue":s[0]||(s[0]=t=>b.value=t),"prepend-inner-icon":"mdi-magnify",density:"compact",label:"Search all Fields","single-line":"",flat:"","hide-details":"",variant:"solo-filled"},null,8,["modelValue"])]),_:1}),l(O,{search:b.value,"onUpdate:search":s[1]||(s[1]=t=>b.value=t),modelValue:n.selected,"onUpdate:modelValue":s[2]||(s[2]=t=>n.selected=t),headers:o(L),items:o(N),"item-value":"order_ref_number",class:"elevation-1"},{item:a(({item:t})=>[e("tr",null,[e("td",null,d(t.name),1),e("td",null,d(t.type),1),e("td",null,d(t.status),1),e("td",null,[o(_).type==="instructor"?(i(),g(o(j),{key:0,href:n.route("question.index",{assessment_id:t.id})},{default:a(()=>[l(r,{class:"mr-2",density:"comfortable",icon:"mdi-chat-question",color:"warning"})]),_:2},1032,["href"])):(i(),g(o(j),{key:1,href:n.route("assessment.take",{assessment_id:t.id})},{default:a(()=>[l(r,{class:"mr-2",density:"comfortable",icon:"mdi-forum",color:"warning"})]),_:2},1032,["href"])),o(_).type==="instructor"?(i(),g(o(j),{key:2,href:n.route("assessment.edit",{assessment:t.id})},{default:a(()=>[l(r,{class:"mr-2",density:"comfortable",icon:"mdi-pencil",color:"success"})]),_:2},1032,["href"])):k("",!0),o(_).type==="instructor"?(i(),g(o(j),{key:3,href:n.route("assessment.copy",{id:t.id})},{default:a(()=>[l(r,{class:"mr-2",density:"comfortable",icon:"mdi-clipboard",color:"primary"})]),_:2},1032,["href"])):k("",!0),o(_).type==="instructor"?(i(),g(r,{key:4,onClick:p=>R(t),class:"mr-2 text-white",density:"comfortable",icon:"mdi-delete",color:"danger"},null,8,["onClick"])):k("",!0)])])]),_:1},8,["search","modelValue","headers","items"])])])])])])]),e("div",xe,[e("div",we,[e("div",Ve,[e("div",Ce,[je,e("div",Ae,[e("div",Ue,[l(h,{class:"d-flex align-center pe-2"},{default:a(()=>[l(c),l(m,{modelValue:b.value,"onUpdate:modelValue":s[3]||(s[3]=t=>b.value=t),"prepend-inner-icon":"mdi-magnify",density:"compact",label:"Search all Fields","single-line":"",flat:"","hide-details":"",variant:"solo-filled"},null,8,["modelValue"])]),_:1}),l(O,{search:b.value,"onUpdate:search":s[4]||(s[4]=t=>b.value=t),modelValue:o(A),"onUpdate:modelValue":s[5]||(s[5]=t=>ee(A)?A.value=t:A=t),headers:o(T),items:o(V),"item-value":"order_ref_number",class:"elevation-1"},{item:a(({item:t})=>{var p,C,f;return[e("tr",null,[e("td",null,d((p=t.user)==null?void 0:p.name),1),e("td",null,d((C=t.user)==null?void 0:C.email),1),e("td",null,d((f=t.user)==null?void 0:f.contact),1),Be])]}),_:1},8,["search","modelValue","headers","items"])])])])])])]),o(_).type==="instructor"?(i(),y("div",Me,[e("div",Ne,[e("div",Oe,[e("div",Se,[Ee,e("div",Fe,[e("div",Le,[l(r,{color:"primary",class:"float-right","prepend-icon":"mdi-cloud-download",onClick:D},{default:a(()=>[x("Export")]),_:1})]),e("div",Te,[l(Z,null,{default:a(()=>[(i(!0),y(M,null,E(o(V),t=>(i(),g(Q,null,{default:a(()=>[l(z,null,{default:a(()=>{var p;return[x(d((p=t.user)==null?void 0:p.name),1)]}),_:2},1024),l(P,null,{default:a(()=>{var p,C;return[l(I,{class:"table table-responsive table-bordered"},{default:a(()=>{var f;return[Ge,e("tbody",null,[(i(!0),y(M,null,E((f=t.user)==null?void 0:f.assessment_result,w=>{var S;return i(),y("tr",null,[e("td",null,d((S=w==null?void 0:w.assessment)==null?void 0:S.name),1),e("td",null,d(w.grade),1)])}),256))])]}),_:2},1024),e("div",qe," Final Grade: "+d(((C=(p=t.user)==null?void 0:p.assessment_result)==null?void 0:C.length)>0?(t.user.assessment_result.reduce((f,w)=>f+(Number(w.grade)||0),0)/(t.user.assessment_result.length*100)*100).toFixed(2):"N/A")+" % ",1)]}),_:2},1024)]),_:2},1024))),256))]),_:1})])])])])])])):k("",!0)])])]),_:1})],64)}}};export{pt as default};
