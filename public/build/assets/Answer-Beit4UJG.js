import{A as H}from"./AbleProLayout-C8pKILly.js";import{T as N,Z as R}from"./@inertiajs-Ctqp54vJ.js";import{_ as B}from"./TextInput-B0165BvM.js";import{r as d,k as C,l as F,w as j,y as V,o as n,e as i,q as h,u as p,v as w,j as S,t as f,f as e,F as y,B as T,z,g as O}from"./@vue-BNcvJdUh.js";import"./ApplicationLogo-BDL_RRZn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./axios-9PTFF6AP.js";import"./deepmerge-D5vjR_z7.js";import"./@ckeditor-DYCdx3Av.js";import"./vue-BQIRGYU1.js";import"./qs-B3KJO7My.js";import"./side-channel-Bgx6Pom5.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./call-bind-Bt3bzbWQ.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./object-inspect-CKiJXyHS.js";import"./nprogress-DN-MxXYu.js";import"./lodash.clonedeep-mosj99cq.js";import"./lodash.isequal-D_danmex.js";const Q={class:"row"},E={class:"col-md-12"},P={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},J={class:"text-right"},Z={class:"text-lg font-medium text-gray-900"},$={key:0},G=["innerHTML"],K={class:"list-unstyled mt-3"},W={key:1},X=["innerHTML"],Y={class:"text-black"},ee={key:2},te=["innerHTML"],se={class:"list-unstyled mt-3"},Ae={__name:"Answer",props:{assessment:Object,questions:Object,answered:Boolean,assessmentResult:Object},setup(b){const t=b;let D=d([]);d([]);let m=d({});const g=N({answers:null,assessment:null,formula:null,replacement:null,questionsReplaced:null});let k=d({});d(!1);let x=d([]);const U=a=>{console.log("Randomize");let l={};return{question:a.question.toString().replace(/{{(.*?)}}|\[\[(.*?)\]\]/g,r=>{let o=r.replace(/\{\{|\}\}|\[\[|\]\]/g,""),_=Math.ceil(a.lower_value),c=Math.ceil(a.upper_value);const s=Math.floor(Math.random()*(c-_+1)+_).toString();return l[o]=s,s}),replacements:l}},I=d("");let M,q=d({});C(()=>{D.value=t.questions,x.value=t.questions.map(r=>{let o=U(r);return r.question=o.question,console.log("result question",o.question),q.value[r.id]=o.question,k.value[r.id]=o.replacements,r});let a=t.assessment.time_limit,l=localStorage.getItem("startTime"),u=localStorage.getItem("endTime");!l||!u?(l=new Date,u=new Date(l.getTime()+a*60*1e3),localStorage.setItem("startTime",l),localStorage.setItem("endTime",u)):(l=new Date(l),u=new Date(u)),M=setInterval(()=>{let o=u-new Date,_=Math.floor(o%(1e3*60*60)/(1e3*60)),c=Math.floor(o%(1e3*60)/1e3);I.value=_+"m "+c+"s ",o<0&&(console.log(1),localStorage.removeItem("startTime"),localStorage.removeItem("endTime"),t.assessment.isAutoSubmit===1?L():alert("times up!"),clearInterval(M))},1e3)}),F(()=>{clearInterval(M)}),j(m.value,(a,l)=>{console.log(a,l)});const L=async()=>{console.log(m.value),g.answers=m.value,g.assessment=t.assessment,g.replacement=k.value,localStorage.setItem("answer",JSON.stringify(g.answers)),g.questionsReplaced=q.value,g.post(route("assessment.submit-answer"),{onFinish:a=>{console.log("finish")},onSuccess:a=>{console.log(a),console.log("success")},onError:()=>{alert("error")}})};return(a,l)=>{var _;const u=V("v-radio"),r=V("v-radio-group"),o=V("v-btn");return n(),i(y,null,[h(p(R),{title:(_=t.assessment)==null?void 0:_.name},null,8,["title"]),h(H,null,{pageTitle:w(()=>{var c;return[S(f((c=t.assessment)==null?void 0:c.name),1)]}),default:w(()=>{var c;return[e("div",Q,[e("div",E,[e("div",P,[e("header",null,[e("h2",J,f(I.value),1),e("h2",Z,f((c=t.assessment)==null?void 0:c.name),1)]),S(" "+f(t.assessment.type)+" ",1),t.assessment.type=="Fill in the Blank"||t.assessment.type=="True or False"||t.assessment.type=="Essay"||t.assessment.type=="Matching Type"?(n(),i("div",$,[e("ol",null,[(n(!0),i(y,null,T(b.questions,s=>(n(),i("li",null,[e("div",{innerHTML:s.question},null,8,G),e("ul",K,[e("li",null,[h(B,{id:"d",type:"text",class:"block w-50",modelValue:p(m)[s.id],"onUpdate:modelValue":v=>p(m)[s.id]=v,required:!0,label:"Answer"},null,8,["modelValue","onUpdate:modelValue"])])])]))),256))])])):t.assessment.type=="Multiple Choice"?(n(),i("div",W,[e("ol",null,[(n(!0),i(y,null,T(b.questions,s=>(n(),i("li",null,[e("div",{innerHTML:s.question},null,8,X),h(r,{modelValue:p(m)[s.id],"onUpdate:modelValue":v=>p(m)[s.id]=v},{default:w(()=>[(n(!0),i(y,null,T(s.choices,(v,A)=>(n(),z(u,{value:A},{label:w(()=>[e("div",Y,f(v),1)]),default:w(()=>[e("div",null,f(A)+".",1)]),_:2},1032,["value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),256))])])):t.assessment.type=="Problem Solving"?(n(),i("div",ee,[e("ol",null,[(n(!0),i(y,null,T(p(x),s=>(n(),i("li",null,[e("div",{innerHTML:s.question},null,8,te),e("ul",se,[e("li",null,[h(B,{id:"d",type:"text",class:"block w-50",modelValue:p(m)[s.id],"onUpdate:modelValue":v=>p(m)[s.id]=v,required:!0,label:"Answer"},null,8,["modelValue","onUpdate:modelValue"])])])]))),256))])])):O("",!0),e("div",null,[h(o,{onClick:L,class:"w-100 block",color:"primary"},{default:w(()=>[S("Save Answer")]),_:1})])])])])]}),_:1})],64)}}};export{Ae as default};
